-----------ContactImageDyanmic_TriggerHandler------
//Trigger handler for Contentversion to add image in contact customfield
public class ContactImageDyanmic {
    public static void contactImage_ContentVersion(List<ContentVersion> contentVersions){
        list<ContentDistribution> cdlist = new List<ContentDistribution>();
        string URL;
        Id ContentdocId;
        list<Id> ContactId =new list<Id>();
        try{
        for(ContentVersion objCV : contentVersions){
                ContentdocId = objCV.ContentDocumentId; 
            //insert ContentDistribution with contentversion id
                ContentDistribution ConDist = new ContentDistribution();
                ConDist.ContentVersionId = objCV.Id;
                ConDist.Name = 'External Link';
                ConDist.PreferencesNotifyOnVisit = false;
                ConDist.PreferencesAllowViewInBrowser = true;
                ConDist.PreferencesAllowOriginalDownload=true;
                cdlist.add(ConDist);
        }
        if(!cdlist.isEmpty())
        {
            insert cdlist;
        }
        list<ContentDistribution> cdurl_list =[select id, DistributionPublicUrl from ContentDistribution where id=:cdlist[0].id];
        list<contentdocumentlink> linklist=[select id,LinkedEntityId,contentdocumentid from contentdocumentlink where contentdocumentid=:ContentdocId];
        //Iterate through ContentDistribution list for getting URL
        for(ContentDistribution obj: cdurl_list){
            URL=obj.DistributionPublicUrl;
            system.debug('URL ====>  '+URL);
        }
		//Iterate through ContentDistributionlink list for linking LinkedEntityId with contactid
        for(contentdocumentlink linkobj:linklist){
           ContactId.add(linkobj.LinkedEntityId);
        }
        system.debug('Contact Ids'+ContactId);
        list<Contact> clist=[select id,lastname,ProfileImage__c from contact where id=:ContactId];
        list<Contact> updatelist=new list<Contact>();
        for(Contact cobj:clist){
            cobj.ProfileImage__c= URL;
            updatelist.add(cobj);
        }
        if(!updatelist.isEmpty()){
            database.update(updatelist);
        }
        }
        catch(Exception ex){
            system.debug('Error Occur = '+ex.getMessage() + ex.getLineNumber());
        }
    }
}
  
  
  
  --------Trigger--------
  trigger ContentversionImage_Trigger on ContentVersion (after insert) {
    if(trigger.isafter && trigger.isinsert){
    ContactImageDyanmic.contactImage_ContentVersion(trigger.new);
    }
}
